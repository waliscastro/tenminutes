!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){"use strict";var e,a;t.fn.ratingLocales={},t.fn.ratingThemes={},e={NAMESPACE:".rating",DEFAULT_MIN:0,DEFAULT_MAX:5,DEFAULT_STEP:.5,isEmpty:function(e,a){return null==e||0===e.length||a&&""===t.trim(e)},getCss:function(t,e){return t?" "+e:""},addCss:function(t,e){t.removeClass(e).addClass(e)},getDecimalPlaces:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},applyPrecision:function(t,e){return parseFloat(t.toFixed(e))},handler:function(t,a,i,n,s){var r=s?a:a.split(" ").join(e.NAMESPACE+" ")+e.NAMESPACE;n||t.off(r),t.on(r,i)}},(a=function(e,a){this.$element=t(e),this._init(a)}).prototype={constructor:a,_parseAttr:function(t,a){var i,n,s,r,l=this.$element,o=l.attr("type");if("range"===o||"number"===o){switch(n=a[t]||l.data(t)||l.attr(t),t){case"min":s=e.DEFAULT_MIN;break;case"max":s=e.DEFAULT_MAX;break;default:s=e.DEFAULT_STEP}i=e.isEmpty(n)?s:n,r=parseFloat(i)}else r=parseFloat(a[t]);return isNaN(r)?s:r},_parseValue:function(t){var e=parseFloat(t);return isNaN(e)&&(e=this.clearValue),!this.zeroAsNull||0!==e&&"0"!==e?e:null},_setDefault:function(t,a){e.isEmpty(this[t])&&(this[t]=a)},_initSlider:function(t){var a=this.$element.val();this.initialValue=e.isEmpty(a)?0:a,this._setDefault("min",this._parseAttr("min",t)),this._setDefault("max",this._parseAttr("max",t)),this._setDefault("step",this._parseAttr("step",t)),(isNaN(this.min)||e.isEmpty(this.min))&&(this.min=e.DEFAULT_MIN),(isNaN(this.max)||e.isEmpty(this.max))&&(this.max=e.DEFAULT_MAX),(isNaN(this.step)||e.isEmpty(this.step)||0===this.step)&&(this.step=e.DEFAULT_STEP),this.diff=this.max-this.min},_initHighlight:function(t){var e,a=this._getCaption();t||(t=this.$element.val()),e=this.getWidthFromValue(t)+"%",this.$filledStars.width(e),this.cache={caption:a,width:e,val:t}},_getContainerCss:function(){return"rating-container"+e.getCss(this.theme,"theme-"+this.theme)+e.getCss(this.rtl,"rating-rtl")+e.getCss(this.size,"rating-"+this.size)+e.getCss(this.animate,"rating-animate")+e.getCss(this.disabled||this.readonly,"rating-disabled")+e.getCss(this.containerClass,this.containerClass)},_checkDisabled:function(){var t=this.$element,e=this.options;this.disabled=void 0===e.disabled?t.attr("disabled")||!1:e.disabled,this.readonly=void 0===e.readonly?t.attr("readonly")||!1:e.readonly,this.inactive=this.disabled||this.readonly,t.attr({disabled:this.disabled,readonly:this.readonly})},_addContent:function(t,e){var a=this.$container,i="clear"===t;return this.rtl?i?a.append(e):a.prepend(e):i?a.prepend(e):a.append(e)},_generateRating:function(){var a,i,n,s=this.$element;i=this.$container=t(document.createElement("div")).insertBefore(s),e.addCss(i,this._getContainerCss()),this.$rating=a=t(document.createElement("div")).attr("class","rating-stars").appendTo(i).append(this._getStars("empty")).append(this._getStars("filled")),this.$emptyStars=a.find(".empty-stars"),this.$filledStars=a.find(".filled-stars"),this._renderCaption(),this._renderClear(),this._initHighlight(),i.append(s),this.rtl&&(n=Math.max(this.$emptyStars.outerWidth(),this.$filledStars.outerWidth()),this.$emptyStars.width(n)),s.appendTo(a)},_getCaption:function(){return this.$caption&&this.$caption.length?this.$caption.html():this.defaultCaption},_setCaption:function(t){this.$caption&&this.$caption.length&&this.$caption.html(t)},_renderCaption:function(){var a,i=this.$element.val(),n=this.captionElement?t(this.captionElement):"";if(this.showCaption){if(a=this.fetchCaption(i),n&&n.length)return e.addCss(n,"caption"),n.html(a),void(this.$caption=n);this._addContent("caption",'<div class="caption">'+a+"</div>"),this.$caption=this.$container.find(".caption")}},_renderClear:function(){var a,i=this.clearElement?t(this.clearElement):"";if(this.showClear){if(a=this._getClearClass(),i.length)return e.addCss(i,a),i.attr({title:this.clearButtonTitle}).html(this.clearButton),void(this.$clear=i);this._addContent("clear",'<div class="'+a+'" title="'+this.clearButtonTitle+'">'+this.clearButton+"</div>"),this.$clear=this.$container.find("."+this.clearButtonBaseClass)}},_getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},_toggleHover:function(t){var e,a,i;t&&(this.hoverChangeStars&&(e=this.getWidthFromValue(this.clearValue),a=t.val<=this.clearValue?e+"%":t.width,this.$filledStars.css("width",a)),this.hoverChangeCaption&&(i=t.val<=this.clearValue?this.fetchCaption(this.clearValue):t.caption)&&this._setCaption(i+""))},_init:function(e){var a,i=this,n=i.$element.addClass("rating-input");return i.options=e,t.each(e,function(t,e){i[t]=e}),(i.rtl||"rtl"===n.attr("dir"))&&(i.rtl=!0,n.attr("dir","rtl")),i.starClicked=!1,i.clearClicked=!1,i._initSlider(e),i._checkDisabled(),i.displayOnly&&(i.inactive=!0,i.showClear=!1,i.showCaption=!1),i._generateRating(),i._initEvents(),i._listen(),a=i._parseValue(n.val()),n.val(a),n.removeClass("rating-loading")},_initEvents:function(){var t=this;t.events={_getTouchPosition:function(a){return(e.isEmpty(a.pageX)?a.originalEvent.touches[0].pageX:a.pageX)-t.$rating.offset().left},_listenClick:function(t,e){if(t.stopPropagation(),t.preventDefault(),!0===t.handled)return!1;e(t),t.handled=!0},_noMouseAction:function(e){return!t.hoverEnabled||t.inactive||e&&e.isDefaultPrevented()},initTouch:function(a){var i,n,s,r,l,o,h,c,u=t.clearValue||0;("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&!t.inactive&&(i=a.originalEvent,n=e.isEmpty(i.touches)?i.changedTouches:i.touches,s=t.events._getTouchPosition(n[0]),"touchend"===a.type?(t._setStars(s),c=[t.$element.val(),t._getCaption()],t.$element.trigger("change").trigger("rating:change",c),t.starClicked=!0):(l=(r=t.calculate(s)).val<=u?t.fetchCaption(u):r.caption,o=t.getWidthFromValue(u),h=r.val<=u?o+"%":r.width,t._setCaption(l),t.$filledStars.css("width",h)))},starClick:function(e){var a,i;t.events._listenClick(e,function(e){if(t.inactive)return!1;a=t.events._getTouchPosition(e),t._setStars(a),i=[t.$element.val(),t._getCaption()],t.$element.trigger("change").trigger("rating.change",i),t.starClicked=!0})},clearClick:function(e){t.events._listenClick(e,function(){t.inactive||(t.clear(),t.clearClicked=!0)})},starMouseMove:function(e){var a,i;t.events._noMouseAction(e)||(t.starClicked=!1,a=t.events._getTouchPosition(e),i=t.calculate(a),t._toggleHover(i),t.$element.trigger("rating:hover",[i.val,i.caption,"stars"]))},starMouseLeave:function(e){var a;t.events._noMouseAction(e)||t.starClicked||(a=t.cache,t._toggleHover(a),t.$element.trigger("rating:hoverleave",["stars"]))},clearMouseMove:function(e){var a,i,n;!t.events._noMouseAction(e)&&t.hoverOnClear&&(t.clearClicked=!1,a='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"</span>",i=t.clearValue,n={caption:a,width:t.getWidthFromValue(i)||0,val:i},t._toggleHover(n),t.$element.trigger("rating:hover",[i,a,"clear"]))},clearMouseLeave:function(e){var a;t.events._noMouseAction(e)||t.clearClicked||!t.hoverOnClear||(a=t.cache,t._toggleHover(a),t.$element.trigger("rating:hoverleave",["clear"]))},resetForm:function(e){e&&e.isDefaultPrevented()||t.inactive||t.reset()}}},_listen:function(){var a=this.$element,i=a.closest("form"),n=this.$rating,s=this.$clear,r=this.events;return e.handler(n,"touchstart touchmove touchend",t.proxy(r.initTouch,this)),e.handler(n,"click touchstart",t.proxy(r.starClick,this)),e.handler(n,"mousemove",t.proxy(r.starMouseMove,this)),e.handler(n,"mouseleave",t.proxy(r.starMouseLeave,this)),this.showClear&&s.length&&(e.handler(s,"click touchstart",t.proxy(r.clearClick,this)),e.handler(s,"mousemove",t.proxy(r.clearMouseMove,this)),e.handler(s,"mouseleave",t.proxy(r.clearMouseLeave,this))),i.length&&e.handler(i,"reset",t.proxy(r.resetForm,this),!0),a},_getStars:function(t){var e,a='<span class="'+t+'-stars">';for(e=1;e<=this.stars;e++)a+='<span class="star">'+this[t+"Star"]+"</span>";return a+"</span>"},_setStars:function(t){var e=arguments.length?this.calculate(t):this.calculate(),a=this.$element,i=this._parseValue(e.val);return a.val(i),this.$filledStars.css("width",e.width),this._setCaption(e.caption),this.cache=e,a},showStars:function(t){var e=this._parseValue(t);return this.$element.val(e),this._setStars()},calculate:function(t){var a=e.isEmpty(this.$element.val())?0:this.$element.val(),i=arguments.length?this.getValueFromPosition(t):a,n=this.fetchCaption(i),s=this.getWidthFromValue(i);return{caption:n,width:s+="%",val:i}},getValueFromPosition:function(t){var a,i,n=e.getDecimalPlaces(this.step),s=this.$rating.width();return i=this.diff*t/(s*this.step),i=this.rtl?Math.floor(i):Math.ceil(i),a=e.applyPrecision(parseFloat(this.min+i*this.step),n),a=Math.max(Math.min(a,this.max),this.min),this.rtl?this.max-a:a},getWidthFromValue:function(t){var e,a,i=this.min,n=this.max,s=this.$emptyStars;return!t||t<=i||i===n?0:(e=(a=s.outerWidth())?s.width()/a:1,t>=n?100:(t-i)*e*100/(n-i))},fetchCaption:function(t){var a,i,n,s=parseFloat(t)||this.clearValue,r=this.starCaptions,l=this.starCaptionClasses;return s&&s!==this.clearValue&&(s=e.applyPrecision(s,e.getDecimalPlaces(this.step))),n="function"==typeof l?l(s):l[s],i="function"==typeof r?r(s):r[s],a=e.isEmpty(i)?this.defaultCaption.replace(/\{rating}/g,s):i,'<span class="'+(e.isEmpty(n)?this.clearCaptionClass:n)+'">'+(s===this.clearValue?this.clearCaption:a)+"</span>"},destroy:function(){var a=this.$element;return e.isEmpty(this.$container)||this.$container.before(a).remove(),t.removeData(a.get(0)),a.off("rating").removeClass("rating rating-input")},create:function(t){var e=t||this.options||{};return this.destroy().rating(e)},clear:function(){var t='<span class="'+this.clearCaptionClass+'">'+this.clearCaption+"</span>";return this.inactive||this._setCaption(t),this.showStars(this.clearValue).trigger("change").trigger("rating:clear")},reset:function(){return this.showStars(this.initialValue).trigger("rating:reset")},update:function(t){return arguments.length?this.showStars(t):this.$element},refresh:function(e){var a=this.$element;return e?this.destroy().rating(t.extend(!0,this.options,e)).trigger("rating:refresh"):a}},t.fn.rating=function(i){var n=Array.apply(null,arguments),s=[];switch(n.shift(),this.each(function(){var r,l=t(this),o=l.data("rating"),h="object"==typeof i&&i,c=h.theme||l.data("theme"),u=h.language||l.data("language")||"en",d={},p={};o||(c&&(d=t.fn.ratingThemes[c]||{}),"en"===u||e.isEmpty(t.fn.ratingLocales[u])||(p=t.fn.ratingLocales[u]),r=t.extend(!0,{},t.fn.rating.defaults,d,t.fn.ratingLocales.en,p,h,l.data()),o=new a(this,r),l.data("rating",o)),"string"==typeof i&&s.push(o[i].apply(o,n))}),s.length){case 0:return this;case 1:return void 0===s[0]?this:s[0];default:return s}},t.fn.rating.defaults={theme:"",language:"en",stars:5,filledStar:'<i class="glyphicon glyphicon-star"></i>',emptyStar:'<i class="glyphicon glyphicon-star-empty"></i>',containerClass:"",size:"md",animate:!0,displayOnly:!1,rtl:!1,showClear:!0,showCaption:!0,starCaptionClasses:{.5:"label label-danger badge-danger",1:"label label-danger badge-danger",1.5:"label label-warning badge-warning",2:"label label-warning badge-warning",2.5:"label label-info badge-info",3:"label label-info badge-info",3.5:"label label-primary badge-primary",4:"label label-primary badge-primary",4.5:"label label-success badge-success",5:"label label-success badge-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0,zeroAsNull:!0},t.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},clearButtonTitle:"Clear",clearCaption:"Not Rated"},t.fn.rating.Constructor=a,t(document).ready(function(){var e=t("input.rating");e.length&&e.removeClass("rating-loading").addClass("rating-loading").rating()})});